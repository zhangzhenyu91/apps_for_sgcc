import{_ as i,o as a,c as n,ak as l}from"./chunks/framework.DOv5oLJw.js";const g=JSON.parse('{"title":"离线部署 Cloudreve Pro","description":"","frontmatter":{},"headers":[],"relativePath":"install/cloudreve_install.md","filePath":"install/cloudreve_install.md"}'),h={name:"install/cloudreve_install.md"};function k(p,s,e,t,r,d){return a(),n("div",null,[...s[0]||(s[0]=[l(`<h1 id="离线部署-cloudreve-pro" tabindex="-1">离线部署 Cloudreve Pro <a class="header-anchor" href="#离线部署-cloudreve-pro" aria-label="Permalink to “离线部署 Cloudreve Pro”">​</a></h1><div class="info custom-block"><p class="custom-block-title">测试设备说明</p><p>测试机型：联想 开天 M99h G1t（海光 C86 3250）</p><p>测试系统：银河麒麟 V10 SP1 2503</p><p>最后更新时间：2026-02-16</p></div><h2 id="一、前言" tabindex="-1">一、前言 <a class="header-anchor" href="#一、前言" aria-label="Permalink to “一、前言”">​</a></h2><h3 id="cloudreve-是什么" tabindex="-1">Cloudreve 是什么？ <a class="header-anchor" href="#cloudreve-是什么" aria-label="Permalink to “Cloudreve 是什么？”">​</a></h3><p>Cloudreve 可以让您快速搭建起公私兼备的网盘系统。Cloudreve 在底层支持不同的云存储平台，用户在实际使用时无须关心物理存储方式。你可以使用 Cloudreve 搭建个人用网盘、文件分享系统，亦或是针对大小团体的公有云系统。</p><h3 id="内网环境下的使用场景" tabindex="-1">内网环境下的使用场景？ <a class="header-anchor" href="#内网环境下的使用场景" aria-label="Permalink to “内网环境下的使用场景？”">​</a></h3><p>作者所在单位负责输电线路的运维工作，会使用无人机拍取大量照片，普通班组并未配备 NAS 之类的存储设备，所以想到在多台计算机中部署 RustFS 作为 S3 存储桶（非集群部署，方便新计算机投入使用时添加存储策略即可，也方便后续旧计算机更换时的迁移，更重要的是我不会集群部署0.0），并在常用电脑中部署 Cloudreve 连接至各存储桶，以提供各种便利：</p><ul><li>查找资料、照片无需在各个计算机中流转，任一计算机都可访问全部资料；</li><li>部署 OnlyOffice 后多台计算机可同时在线编辑，实现协同办公（在线文档）的功能；</li><li>邮件传输大文件时，可直接分享 Cloudreve 链接，文件流转效率大大提升；</li></ul><p>……</p><blockquote><p>由于涉及多台计算机作为 S3 存储桶，会在 Cloudreve 中添加多个存储策略以供使用，所以作者推荐且本文部署的是捐助版也就是 Pro 版本，若要部署社区版将镜像替换为社区版的镜像即可</p></blockquote><h2 id="二、准备工作" tabindex="-1">二、准备工作 <a class="header-anchor" href="#二、准备工作" aria-label="Permalink to “二、准备工作”">​</a></h2><h3 id="拉取并导出镜像" tabindex="-1">拉取并导出镜像 <a class="header-anchor" href="#拉取并导出镜像" aria-label="Permalink to “拉取并导出镜像”">​</a></h3><ul><li>登录 Cloudreve 授权管理平台获取登录私有仓库命令：</li></ul><p><img src="https://docs.cos.j1net.com/halodoc/cloudreve_install/login.webp" alt="img"></p><ul><li>在一台接入互联网、并安装有 docker 的计算机中拉取镜像（推荐挂代理，否则下载速度会慢）：</li></ul><p>使用上一步获取的 <strong>登录命令</strong> 登录到官方的私有仓库，登录后执行以下命令：</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拉取cloudreve镜像，注意需对应内网计算机的处理器架构，社区版将镜像替换为：cloudreve/cloudreve:latest</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudreve.azurecr.io/cloudreve/pro:4.14.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux/amd64</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拉取redis镜像</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis:8.4.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux/amd64</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拉取tika镜像用于全文搜索（不需要全文搜索可跳过）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache/tika:latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux/amd64</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拉取meilisearch镜像用于全文搜索（不需要全文搜索可跳过）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> getmeili/meilisearch:v1.35.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --platform</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> linux/amd64</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导出镜像并保存至指定路径</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> save</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -o</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /Users/admin/Downloads/all.tar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudreve.azurecr.io/cloudreve/pro:4.14.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis:8.4.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache/tika:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> getmeili/meilisearch:v1.35.0</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 删除镜像，以免占用外网计算机空间</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rmi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cloudreve.azurecr.io/cloudreve/pro:4.14.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> redis:8.4.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> apache/tika:latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> getmeili/meilisearch:v1.35.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 或使用命令删除所有未使用的资源、镜像</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> image</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prune</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -a</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> prune</span></span></code></pre></div><blockquote><p>条件有限无法获取镜像的检一网络科技可免费提供普通版 .tar 包（为保护 Cloudreve 作者权益，Pro 版需提供授权截图可打码/其余可证明有授权的方式/i国网），邮件发送“cloudreve镜像请求”到 <a href="mailto:official@j1net.com" target="_blank" rel="noreferrer">official@j1net.com</a></p></blockquote><h3 id="编辑-docker-compose-yml" tabindex="-1">编辑 docker-compose.yml <a class="header-anchor" href="#编辑-docker-compose-yml" aria-label="Permalink to “编辑 docker-compose.yml”">​</a></h3><ul><li>创建文本文件写入以下内容并保存为 <code>docker-compose.yml</code> ：</li></ul><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">services</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloudreve</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cloudreve.azurecr.io/cloudreve/pro:4.14.1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 替换为cloudreve镜像名，防止出错加引号</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cloudreve</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    depends_on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">80:5212</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # cloudreve映射端口</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">TZ=Asia/Shanghai</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.Type=mysql</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.Host=127.0.0.1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 此处需修改为MySQL数据库地址（必改）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.User=root</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 此处需修改为数据库用户名（必改）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.Password=123456</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 此处需修改为数据库密码（必改）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.Name=cloudreve</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 此处需修改为数据库名（必改）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Database.Port=3306</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 此处需修改为数据库端口（必改）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_CONF_Redis.Server=redis:6379</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   # 本配置包含Redis部署，如使用外部Redis才需修改此项</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_LICENSE_KEY=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   # 授权密钥，社区版可删除此行（Pro版必填）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">CR_OFFLINE_LICENSE=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # 离线许可证，社区版可删除此行（Pro版必填）</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">cloudreve_data:/cloudreve/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  redis</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis:8.4.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 替换为redis镜像名</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis_data:/data</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">redis-server --appendonly yes</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tika</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">apache/tika:latest</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 替换为tika镜像名</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">tika</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">9998:9998</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # tika映射端口</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  meilisearch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    image</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">getmeili/meilisearch:v1.35.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 替换为meilisearch镜像名</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    container_name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">meilisearch</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    restart</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">always</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    ports</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">7700:7700</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # meilisearch映射端口</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">MEILI_MASTER_KEY=&#39;TmDSKZhcoEMzTt3STPhRQVRxPEVZw7m2TymKwKhs_YaL3GF&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 请替换为实际的API密钥</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">meili_data:/meili_data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">volumes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  cloudreve_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">local</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver_opts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">none</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bind</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/cloudreve/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # cloudreve持久化目录</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  redis_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">local</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver_opts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">none</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bind</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/cloudreve/redis/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # redis持久化目录</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  meili_data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">local</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    driver_opts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">none</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      o</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bind</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      device</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/opt/cloudreve/meili/data</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # meilisearch持久化目录</span></span></code></pre></div><ul><li>注意其中部分内容需修改，已注释标明，授权密钥和离线许可证需登录授权中心获取：</li></ul><p><img src="https://docs.cos.j1net.com/halodoc/cloudreve_install/key.webp" alt="img"></p><h2 id="三、在内网计算机中部署" tabindex="-1">三、在内网计算机中部署 <a class="header-anchor" href="#三、在内网计算机中部署" aria-label="Permalink to “三、在内网计算机中部署”">​</a></h2><ul><li>将 <code>all.tar</code> 、<code>docker-compose.yml</code> 文件拷贝至内网计算机中，例如 <code>/data/usershare</code> 目录中，以 <code>root</code> 用户执行命令：</li></ul><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 导入镜像</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> load</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/usershare/all.tar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 创建持久化目录</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -p</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cloudreve/data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cloudreve/redis/data</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cloudreve/meili/data</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 拷贝docker-compose.yml</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /data/usershare/docker-compose.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /opt/cloudreve/docker-compose.yml</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> compose</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -d</span></span></code></pre></div><ul><li>本机访问 <a href="http://127.0.0.1/" target="_blank" rel="noreferrer">127.0.0.1</a> 或在其他局域网计算机中访问本机 IP。</li></ul><hr><p>欢迎同为国网一线班组的同僚们来信交流：<a href="mailto:official@j1net.com" target="_blank" rel="noreferrer">official@j1net.com</a></p>`,29)])])}const F=i(h,[["render",k]]);export{g as __pageData,F as default};
